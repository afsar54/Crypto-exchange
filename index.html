<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CryptoX Exchange</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg-dark: #0b0e11;
      --nav-dark: #1e2329;
      --table-dark: #1e2329;
      --hover-dark: #2b3139;
      --text-light: #eaecef;
      --accent: #fcd535;
      --bg-light: #f9fafb;
      --nav-light: #ffffff;
      --text-dark: #111827;
    }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-light);
      transition: 0.3s;
    }
    .navbar {
      display: flex;
      flex-direction: column;
      background-color: var(--nav-dark);
      padding: 15px 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .navbar-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }
    .logo {
      font-size: 24px;
      font-weight: 600;
      color: var(--accent);
    }
    .navbar-toggle {
      display: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--accent);
    }
    .navbar ul {
      list-style: none;
      display: flex;
      gap: 20px;
      margin: 10px 0 0;
      padding: 0;
      flex-wrap: wrap;
    }
    .navbar li a {
      text-decoration: none;
      color: var(--text-light);
      font-weight: 500;
      cursor: pointer;
    }
    .navbar button {
      background: none;
      border: 1px solid var(--accent);
      color: var(--accent);
      padding: 6px 12px;
      cursor: pointer;
      border-radius: 4px;
      margin-left: 10px;
    }
    .hero {
      text-align: center;
      padding: 80px 20px;
      background: linear-gradient(90deg, #1e2329, #12181d);
    }
    .hero h1 {
      font-size: 48px;
      color: var(--accent);
      margin: 0;
    }
    .hero p {
      font-size: 18px;
      color: #b7bdc6;
      margin-top: 10px;
    }
    .market {
      padding: 40px 20px;
    }
    .market h2 {
      color: var(--accent);
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background-color: var(--table-dark);
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid var(--hover-dark);
    }
    th {
      color: var(--accent);
    }
    tr:hover {
      background-color: var(--hover-dark);
    }
    .green {
      color: #4caf50;
    }
    .red {
      color: #f44336;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: #fff;
      color: #000;
      padding: 20px;
      border-radius: 6px;
      max-width: 400px;
      width: 90%;
      position: relative;
    }
    .modal-content h2 {
      margin-top: 0;
    }
    .modal-content input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      box-sizing: border-box;
    }
    .close-btn {
      background-color: #f44336;
      color: white;
      padding: 6px 12px;
      border: none;
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      font-weight: bold;
      border-radius: 3px;
    }
    .dark-mode {
      --bg-dark: #f9fafb;
      --nav-dark: #ffffff;
      --table-dark: #ffffff;
      --hover-dark: #eeeeee;
      --text-light: #111827;
      background-color: var(--bg-dark);
      color: var(--text-light);
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
      .navbar ul {
        flex-direction: column;
        display: none;
        width: 100%;
      }
      .navbar ul.show {
        display: flex;
      }
      .navbar-toggle {
        display: block;
      }
      .hero h1 {
        font-size: 32px;
      }
      .hero p {
        font-size: 16px;
      }
      table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }
      .modal-content {
        width: 90%;
      }
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-top">
      <div class="logo">CryptoX</div>
      <div class="navbar-toggle" onclick="toggleNavbar()">☰</div>
    </div>
    <ul>
      <li><a href="market.html">Markets</a></li>
<li><a href="trade.html">Trade</a></li>
      <li><a href="#">Earn</a></li>
      <li><a href="#">Wallet</a></li>
      <li><a href="login.html">Login</a></li>
      <li><button onclick="toggleMode()">Toggle Theme</button></li>
    </ul>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <h1>Buy & Trade Crypto Instantly</h1>
    <p>Secure and fast crypto trading experience </p>
  </section>

  <!-- Market -->
  <section class="market">
    <h2>Market Overview</h2>
    <table>
      <thead>
        <tr>
          <th>Pair</th>
          <th>Price</th>
          <th>Change (24h)</th>
          <th>Volume</th>
        </tr>
      </thead>
      <tbody id="market-data">
        <tr>
          <td>BTC/USDT</td>
          <td class="price">$0</td>
          <td class="change">0%</td>
          <td>Loading...</td>
        </tr>
        <tr>
          <td>ETH/USDT</td>
          <td class="price">$0</td>
          <td class="change">0%</td>
          <td>Loading...</td>
        </tr>
        <tr>
          <td>BNB/USDT</td>
          <td class="price">$0</td>
          <td class="change">0%</td>
          <td>Loading...</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- TradingView Chart -->
  <section class="market">
    <h2 style="margin-bottom: 20px;">Live BTC/USDT Chart</h2>
    <div id="tv_chart_container" style="height: 500px;"></div>
  </section>

  <!-- Login/Register Modal -->
  <div class="modal" id="loginModal">
    <div class="modal-content" id="modalContent">
      <button class="close-btn" onclick="closeModal()">×</button>
      <div style="display: flex; justify-content: space-around; margin-bottom: 10px;">
        <button onclick="showTab('login')" style="padding: 6px;">Login</button>
        <button onclick="showTab('register')" style="padding: 6px;">Register</button>
      </div>

      <div id="loginTab">
        <h2>Login</h2>
        <input type="text" placeholder="Username" />
        <input type="password" placeholder="Password" />
        <button style="padding: 10px; background-color: #fcd535; border: none; cursor: pointer;">Login</button>
      </div>

      <div id="registerTab" style="display: none;">
        <h2>Register</h2>
        <input type="text" placeholder="Username" />
        <input type="email" placeholder="Email" />
        <input type="password" placeholder="Password" />
        <button style="padding: 10px; background-color: #fcd535; border: none; cursor: pointer;">Register</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    function toggleMode() {
      document.body.classList.toggle("dark-mode");
      createChart(); // Reload TradingView with new theme
    }

    function openModal() {
      document.getElementById("loginModal").style.display = "flex";
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      document.getElementById("loginModal").style.display = "none";
      document.body.style.overflow = 'auto';
    }

    function showTab(tab) {
      document.getElementById("loginTab").style.display = tab === 'login' ? 'block' : 'none';
      document.getElementById("registerTab").style.display = tab === 'register' ? 'block' : 'none';
    }

    function toggleNavbar() {
      document.querySelector(".navbar ul").classList.toggle("show");
    }

    async function fetchPrices() {
      try {
        const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,binancecoin&vs_currencies=usd&include_24hr_change=true");
        const data = await res.json();

        const rows = document.querySelectorAll("#market-data tr");
        const prices = {
          BTC: data.bitcoin,
          ETH: data.ethereum,
          BNB: data.binancecoin,
        };

        rows.forEach(row => {
          const pair = row.children[0].textContent.split('/')[0];
          const priceEl = row.querySelector(".price");
          const changeEl = row.querySelector(".change");

          const coin = prices[pair];
          if (!coin) return;
          const price = coin.usd;
          const change = coin.usd_24h_change.toFixed(2);
          const isUp = change >= 0;

          priceEl.textContent = `$${price.toLocaleString()}`;
          changeEl.textContent = `${isUp ? '+' : ''}${change}%`;
          changeEl.className = 'change ' + (isUp ? 'green' : 'red');
        });
      } catch (e) {
        console.error('Failed to fetch prices', e);
      }
    }

    fetchPrices();
    setInterval(fetchPrices, 10000);
  </script>

  <!-- TradingView Widget -->
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
    let tvWidget;

    function createChart() {
      if (tvWidget) tvWidget.remove();

      tvWidget = new TradingView.widget({
        container_id: "tv_chart_container",
        width: "100%",
        height: 500,
        symbol: "BINANCE:BTCUSDT",
        interval: "15",
        timezone: "Etc/UTC",
        theme: document.body.classList.contains("dark-mode") ? "light" : "dark",
        style: "1",
        locale: "en",
        toolbar_bg: "#f1f3f6",
        enable_publishing: false,
        hide_top_toolbar: false,
        hide_legend: false,
        save_image: false,
        studies: [],
        show_popup_button: true,
        popup_width: "1000",
        popup_height: "650"
      });
    }

    document.addEventListener("DOMContentLoaded", createChart);
  </script>
</body>
</html>
